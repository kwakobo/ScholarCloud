 <!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="css/theme.css">
		<title>Authors</title>
	</head>
	<body>
		<center>
			<h1 id="title"></h1>
			<table id="table">
				<tr>
					<th>Paper</th>
					<th>Download</th>
					<th>Bibtex</th>
				</tr>
			</table>
		</table>
		</center>
		<script>
			function check_word_is_in_sentence(sentence, word) {
				var text = articles[i]['text'];

				// replace is from wordfreq.worker.js
				text = text
					.replace(/\.+/g, '.') // replace multiple full stops
					.replace(/(.{3,})\.$/g, '$1') // replace single trailing stop
					.replace(/n[\'’]t\b/ig, '') // get rid of ~n't
					.replace(/[\'’](s|ll|d|ve)?\b/ig, '') // get rid of ’ and '
					.toLowerCase();
				var regexp = new RegExp('\\b' + word + '\\b');
				return regexp.exec(text);
			}
			function open_url(url) {
				var win = window.open(url, '_blank');
				win.focus();
			}
			document.getElementById("title").innerHTML = localStorage.word_chosen;

			var table = document.getElementById("table");
			var word_chosen = localStorage.word_chosen;
			var articles = JSON.parse(localStorage.articles);
			console.log(articles);

			for(i = 0; i < articles.length; i++)
			{
				// if word is not in article, break
				if(!check_word_is_in_sentence(articles[i]['text'], word_chosen))
					continue;

				var row = document.createElement("tr");
				table.appendChild(row);

				var article = document.createElement("td");
				var url = document.createElement("td");
				url.setAttribute("onclick", "open_url('" + articles[i]['article'] + "');");
				var bibtex = document.createElement("td");
				bibtex.setAttribute("onclick", "open_url('" + articles[i]['bibtex'] + "');");

				row.appendChild(article);
				row.appendChild(url);
				row.appendChild(bibtex);

				article.innerHTML = articles[i]['title'];
				url.innerHTML = "URL";
				bibtex.innerHTML = "bibtex";
			}
		</script>
	</body>
</html>